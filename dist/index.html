<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <!-- 页面的元信息 -->
    <title>测试预览页面</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no, email=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="white"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="filetype" content="1"/>
    <meta name="publishedtype" content="1"/>
    <meta name="pagetype" content="2"/>
    <meta name="description" content="{TAG_59447_TAG}"/>
    <meta name="keywords" content="{TAG_59446_TAG}"/>
    <meta name="catalogs" content="{TAG_83943_TAG}"/>
    
      <!-- 页面主样式文件 -->
      <link charset="utf-8"  rel="stylesheet" href="./static/css/owo.core.css">
      
    <!-- 附属css文件 -->
    <link rel="stylesheet" href="./static/css/main.css" charset="utf-8">
    <link rel="stylesheet" href="https://cunchu.site/owo/style/idangerous.swiper2.7.6.css" charset="utf-8">
      
  </head>
  <body>
    <div class="scale-box">
    <!-- 页面[page]-->
    <div class="home page" template="page" style="display: none;"><canvas id="canvas"></canvas><div class="no-phone"><img class="so so-0" src="./static/resource/35.jpg"><div class="text-box"><img class="so so-7" src="./static/resource/29.png"><div class="so so-8"><p>革命博物馆、纪念馆、党史馆、烈士陵园等是党和国家红色基因库。</p><p>为庆祝中国共产党成立100周年，切实做好党史教育工作，讲好党的故事、革命的故事、根据地的故事、英雄和烈士的故事，人民网、中国传媒大学、奇安信集团共同发起“红色云展厅”公益展播活动。<br></p></div><div class="so so-9">人民网<br>中国传媒大学<br>奇安信集团</div></div></div><div class="no-pc"><div class="text-box"><img class="so so-7" src="./static/resource/phone-show.png"><div class="so so-9">人民网<br>中国传媒大学<br>奇安信集团</div><img class="arrow" src="./static/resource/arrow.png" o-animation="bottomToTopHide"></div></div></div>
    <!-- 页面[page2]-->
    <div class="page2 page" template="page2" style="display: none;"><div class="no-phone"><img class="so so-0" src="./static/resource/17.jpg"><img class="so so-1 back" src="./static/resource/557.png" go="page"><div class="so so-2"><span class="so so-3 title" style="font-size: 24px;color: #FFFFFF;line-height: 30px;">红色“云展厅”宣传短片播放器</span><div class="so so-4 text" style="font-size: 18px;color: #FFFFFF;line-height: 30px;"><p>革命博物馆、纪念馆、党史馆、烈士陵园等是党和国家红色基因库。</p><p>为庆祝中国共产党成立100周年，切实做好党史教育工作，讲好党的故事、革命的故事、根据地的故事、英雄和烈士的故事，人民网、中国传媒大学、奇安信集团共同推出“红色云展厅”公益展播活动。</p><p>此项目将充分借助于5G云技术将各地革命博物馆、纪念馆、党史馆、烈士陵园等内容数字化，形成红色媒资库，供广大网友能够将党史移动听，线上学。</p></div><div class="so so-5"><video src="" controls="controls"></video></div></div><img class="xuanze" src="./static/resource/xuanze.png" o-hover="grow" o-tap="select"><ul class="city-box clearfix"></ul></div><div class="no-pc"><ul class="city-box clearfix"></ul><img class="xuanze" src="./static/resource/xuanze.png" o-hover="grow" o-tap="select"></div></div>
    <!-- 页面[page3]-->
    <div class="page3 page" template="page3" style="display: none;"><img class="so so-0 no-phone" src="./static/resource/278.png"><img class="so so-1" src="./static/resource/285.png" o-tap="select" o-hover="grow"><img class="so so-2" src="./static/resource/152.png"><img class="so so-1 back" src="./static/resource/557.png" go="page2" o-hover="grow"><select class="so so-3" id="didian"><option value="beijing">北京</option></select><img class="ditu" src="./static/resource/ditu.png"><div class="so select-box-0"><span class="so select-box-1" style="font-size: 20px;color: #FCF9C0;line-height: 30px;">      革命博物馆音频<br></span><span class="so select-box-2" style="font-size: 16px;color: #FFFFFF;line-height: 30px;">      为庆祝中国共产党成立100周年，切实做好党史教育工作，讲好党的故事、革命的故事、根据地的故事、英雄和烈士的故事，人民网、中国传媒大学、奇安信集团共同发起“红色云展厅”公益展播活动。<br></span><img class="so select-box-3" src="./static/resource/252.png"><video class="so select-box-4" src="" controls="controls"></video><div class="so select-box-5"><img class="so select-box-6" src="./static/resource/484.png"><img class="so select-box-7" src="./static/resource/485.png"><img class="so select-box-8 button" src="./static/resource/483.png" o-hover="grow" o-tap="lastMusic()"><img class="so select-box-9 button" src="./static/resource/486.png" o-hover="grow" o-tap="nextMusic()"><img class="so select-box-10" src="./static/resource/429.png"><img class="so select-box-11" src="./static/resource/258.png"></div></div><img class="xuanze no-pc" src="./static/resource/xuanze.png" o-hover="grow" o-tap="select"></div>
    <!-- 页面[page4]-->
    <div class="page4 page" template="page4" style="display: none;"><div class="so so-8"><p>革命博物馆、纪念馆、党史馆、烈士陵园等是党和国家红色基因库。</p><p>为庆祝中国共产党成立100周年，切实做好党史教育工作，讲好党的故事、革命的故事、根据地的故事、英雄和烈士的故事，人民网、中国传媒大学、奇安信集团共同发起“红色云展厅”公益展播活动。<br></p></div><img class="arrow" src="./static/resource/arrow.png" o-animation="bottomToTopHide"></div></div>
    
<!-- 框架script文件 -->
<script src="./static/js/owo.core.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
owo.script = {
  "page": {
    "created": function created() {
      var _this = this;

      console.log('asd');
      var canv = document.getElementById("canvas"),
          ctx = canv.getContext("2d"),
          img = new Image(),
          imgMask = new Image();
      imgMask.src = "https://cunchu.site/owo/material/shuimo/cloud-texture.png";
      img.src = screenInfo.isPc ? "./static/resource/35.jpg" : "./static/resource/phone-bg.png";
      var speed = 0;
      var requestId;

      function draw() {
        speed += 40;
        var maskX = (canv.width - (70 + speed)) / 2,
            maskY = (canv.height - (40 + speed)) / 2;
        ctx.clearRect(0, 0, canv.width, canv.height);
        ctx.globalCompositeOperation = "source-over";
        ctx.drawImage(imgMask, maskX, maskY, 70 + speed, 40 + speed);
        ctx.globalCompositeOperation = "source-in";
        ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight);
        requestId = window.requestAnimationFrame(draw);
      }

      img.onload = function () {
        canv.width = img.naturalWidth;
        canv.height = img.naturalHeight;
        setTimeout(function () {
          canv.style.display = "block";
          draw();
        }, 500);
        setTimeout(function () {
          _this.query('.no-phone .text-box').style.opacity = 1;
          _this.query('.no-pc .text-box').style.opacity = 1;
        }, 2000);
      }; // 滑动


      if (!screenInfo.isPc) {
        owo.tool.touch({
          el: this.$el,
          end: function end(e) {
            if (e.swipe[1] < -100) {
              owo.go('page4');
            }
          }
        });
      }
    },
    "show": function show() {
      setTimeout(function () {// owo.go('page2')
      }, 3000);
    }
  },
  "page2": {
    "data": {
      "activeIndex": 0
    },
    "created": function created() {
      var _this2 = this;

      var outPut = '';

      for (var index = 0; index < editData.length; index++) {
        var element = editData[index];
        outPut += "<li o-tap=\"showItem(" + index + ")\">" + element[0] + "</li>";
      }

      this.query('.no-phone .city-box').innerHTML = outPut;
      this.handleEvent(this, this.query('.no-phone .city-box'));
      this.query('.no-pc .city-box').innerHTML = outPut;
      this.handleEvent(this, this.query('.no-pc .city-box'));
      this.changeActive(0);
      setTimeout(function () {
        _this2.query('ul li').classList.add('active');
      }, 0);
    },
    "showItem": function showItem(activeIndex) {
      this.data.activeIndex = activeIndex;
      this.queryAll('ul li').forEach(function (element) {
        element.classList.remove('active');
      });
      this.$target.classList.add('active');
      this.changeActive(activeIndex);
    },
    "changeActive": function changeActive(activeIndex) {
      this.query('.title').innerHTML = editData[activeIndex][1];
      this.query('.text').innerHTML = editData[activeIndex][2];

      if (editData[activeIndex][3]) {
        this.query('video').style.display = 'block';
        this.query('video').src = editData[activeIndex][3];
      } else {
        this.query('video').style.display = 'none';
      }
    },
    "select": function select() {
      owo.go('page3');
    }
  },
  "page3": {
    "data": {
      "activeMusic": 0,
      "musicPlay": null
    },
    "show": function show() {
      this.data.activeMusic = 0;
      var activeItem = editData[owo.script.page2.data.activeIndex];
      console.log(activeItem);

      if (activeItem[5]) {
        var outHtml = "";

        for (var index = 0; index < activeItem[5].length; index++) {
          var element = activeItem[5][index];
          outHtml += "<option value=\"" + index + "\">" + element[0] + "</option>";
        }

        this.query('.so-3').innerHTML = outHtml;
      }
    },
    "select": function select() {
      this.$el.classList.add('show');
      console.log(this.query('#didian'));
      var activeDiDian = this.query('#didian').options.selectedIndex;
      var activeItem = editData[owo.script.page2.data.activeIndex];

      if (activeItem[5]) {
        var activeData = activeItem[5][activeDiDian];
        this.query('.select-box-3').src = activeData[1];
        this.query('.select-box-4').src = activeData[2];
        this.query('.select-box-2').innerHTML = activeData[3];
        this.changeMusic();
      }
    },
    "changeMusic": function changeMusic() {
      var activeDiDian = this.query('#didian').options.selectedIndex;
      var activeItem = editData[owo.script.page2.data.activeIndex];
      var activeData = activeItem[5][activeDiDian]; // 播放音乐

      this.data.musicPlay = new Audio(activeData[4][this.data.activeMusic]);
      this.data.musicPlay.play();
    },
    "nextMusic": function nextMusic(params) {
      var activeDiDian = this.query('#didian').options.selectedIndex;
      var activeItem = editData[owo.script.page2.data.activeIndex];
      var activeData = activeItem[5][activeDiDian];

      if (activeData[4][this.data.activeMusic + 1]) {
        this.data.activeMusic++;
        this.changeMusic();
      } else {
        owo.tool.notice('已经是最后一个音频了!');
      }
    },
    "lastMusic": function lastMusic(params) {
      var activeDiDian = this.query('#didian').options.selectedIndex;
      var activeItem = editData[owo.script.page2.data.activeIndex];
      var activeData = activeItem[5][activeDiDian];

      if (activeData[4][this.data.activeMusic - 1]) {
        this.data.activeMusic--;
        this.changeMusic();
      } else {
        owo.tool.notice('已经是最新一个音频了!');
      }
    }
  },
  "page4": {
    "created": function created() {
      if (!screenInfo.isPc) {
        owo.tool.touch({
          el: this.$el,
          end: function end(e) {
            if (e.swipe[1] < -100) {
              owo.go('page2');
            }
          }
        });
      }
    }
  }
};
</script>

    <script src="https://cunchu.site/owo/script/idangerous.swiper2.7.6.min.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/check.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/main.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/autoScale.js" type="text/javascript"  charset="UTF-8"></script>

    <script src="./static/js/notice.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/touch.js" type="text/javascript"  charset="UTF-8"></script>
  </body>
</html>